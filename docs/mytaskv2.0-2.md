### DAQ IDE MVP 开发任务列表（简化独立版 v2.0-2）

**MVP 目标**：1.5-2 个月

**当前阶段**：独立开发，所有模块简单实现

**核心原则**：先跑通最小闭环，不依赖现有复杂模块

---

**阶段 1：Python 引擎（daq_core，优先 MQTT）**  
- 搭建 Python 项目结构  
- 实现 MQTT 客户端（使用 paho-mqtt，订阅 topic 获取数据，发布命令）  
- 实现 MockDevice（模拟 MQTT 数据发布）  
- 实现核心节点函数（数学运算、条件判断、数据转换）  
- 实现基本存储组件（CSV 文件记录）  

**阶段 2：编译器（JSON → Python）**  
- 实现 .daq 文件解析器（支持 MQTT 配置）  
- 实现节点执行顺序的拓扑排序  
- 实现 Python 代码生成器（生成 MQTT 订阅/处理逻辑）  
- 使用黄金样例测试（MQTT 模拟数据）  

**阶段 3：VSCode 插件外壳（简单实现）**  
- 使用 VSCode Extension 脚手架创建基础插件  
- 实现基本项目管理（新建/打开 .daq 文件）  
- 实现运行/停止按钮（调用 Python 脚本）  
- 实现输出面板（显示日志）  

**阶段 4：可视化编辑器（简单拖拽实现）**  
- 使用 React + React Flow 实现基础画布  
- 实现简单的组件库面板（设备/逻辑/存储/显示）  
- 支持拖拽组件到画布  
  - MQTT 订阅组件（配置 topic）  
  - 数学运算组件（加减乘除）  
  - CSV 存储组件  
  - 图表显示组件  
- 实现连线功能（节点间数据流）  
- 实现属性配置面板（JSON 表单）  

**阶段 5：仪表盘与实时显示（简单实现）**  
- 使用 Chart.js 或 ECharts 实现基础图表  
- 实现 MQTT.js 客户端订阅实时数据  
- 实现简单的数值显示组件  
- 实现折线图实时更新  

**阶段 6：集成测试**  
- 全流程闭环测试：  
  1. 拖拽 MQTT 订阅组件 → 配置 topic  
  2. 连接数学运算组件（数据处理）  
  3. 连接 CSV 存储组件  
  4. 连接图表显示组件  
  5. 运行项目，验证数据流  
- 10 分钟上手验证  

**阶段 7：AI 演示（可选）**  
- 使用简单的 LLM API 调用（如 OpenAI/Claude）  
- 实现聊天界面（VSCode Webview）  
- 实现组件配置建议功能  

---

**技术栈选择（简化版）**

| 模块 | 技术方案 | 说明 |
|------|----------|------|
| 后端引擎 | Python + paho-mqtt | 轻量级 MQTT 客户端 |
| 前端画布 | React + React Flow | 开源流程图库 |
| 图表库 | ECharts | 功能强大且易用 |
| VSCode 插件 | Yeoman 脚手架 | 官方推荐工具 |
| MQTT Broker | Mosquitto | 本地测试用 |

---

**下一步建议**  
1. **立即起步**：阶段 1 先实现 MQTT 客户端 + MockDevice  
2. **黄金样例**：配置本地 mosquitto，模拟温度传感器数据  
3. **最小闭环**：MQTT 订阅 → 数据处理 → CSV 存储（不做可视化）  
4. **逐步迭代**：闭环跑通后再添加可视化编辑器  

---

**与 v2.0 的区别**

| 项目 | v2.0（复用版） | v2.0-2（简化版） |
|------|----------------|------------------|
| VSCode 插件 | 复用王阳明的插件 | 使用脚手架新建 |
| 可视化编辑器 | 复用阿里低代码引擎 | React Flow 简单实现 |
| 图形编程 | 复用 Blockly | 暂不实现，用 JSON 配置 |
| 大屏组件 | 复用张焕青的大屏 | ECharts 简单图表 |
| 协议组件 | 复用杨晓凯的实现 | paho-mqtt 简单封装 |
| AI 能力 | 复用 MCP | 直接调用 LLM API |

**优势**：  
✅ 不依赖现有代码，避免集成复杂度  
✅ 技术栈简单，学习成本低  
✅ 快速验证核心架构可行性  

**劣势**：  
❌ 功能相对简陋  
❌ 需要从零开发更多模块  
❌ 后期可能需要重构以对接现有系统  
